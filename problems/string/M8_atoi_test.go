package string

import (
	"testing"
)

func TestMyAtoi(t *testing.T) {
	tests := []struct {
		input    string
		expected int
	}{
		{"42", 42},                    // 简单正数
		{"   -42", -42},               // 前导空格和负数
		{"4193 with words", 4193},     // 数字后面跟随字符
		{"words and 987", 0},          // 字符开头
		{"-91283472332", -2147483648}, // 超过下限
		{"91283472332", 2147483647},   // 超过上限
		{"0-1", 0},                    // 数字后面跟随符号
		{"  +004500", 4500},           // 前导空格和正号，前导零
		{"-000000000000001", -1},      // 负数和前导零
		{"00000-42a1234", 0},          // 数字后面跟随无效字符
		{"+1", 1},                     // 正号
		{"-5-", -5},                   // 负号后面无效字符
		{"2147483646", 2147483646},    // 边界值
		{"-2147483647", -2147483647},  // 边界值
		{"", 0},                       // 空字符串
		{"   ", 0},                    // 只有空格
		{"  +  413", 0},               // 符号后有空格
		{"+", 0},                      // 只有符号
		{"-000000000000000000000000000000000000000000001", -1}, // 过多前导零
		{"  -0012a42", -12},                    // 前导空格，前导零，后面有字符
		{"3.14159", 3},                         // 小数点
		{"  0000000000012345678", 12345678},    // 多个前导零
		{"-2147483648", -2147483648},           // 最小边界值
		{"2147483647", 2147483647},             // 最大边界值
		{"+-12", 0},                            // 无效符号
		{"-+12", 0},                            // 无效符号
		{"00000-42a1234", 0},                   // 数字后面跟随无效字符
		{"   +0 123", 0},                       // 空格后有数字
		{"9223372036854775808", 2147483647},    // 超过 int64 范围的数
		{"-9223372036854775809", -2147483648},  // 超过 int64 范围的负数
		{"18446744073709551617", 2147483647},   // 超过 uint64 范围的数
		{"-18446744073709551617", -2147483648}, // 超过 uint64 范围的负数
		{"1a1", 1},                             // 数字后面跟随字符
		{"-0012a42", -12},                      // 前导零和字符
		{"+-2", 0},                             // 无效符号组合
		{"  -000000000000000000000000000000000000000000001", -1},  // 多个前导零的负数
		{"00000000000000000000000000000000000000000000000000", 0}, // 多个前导零的零
		{"21474836460", 2147483647},                               // 超过 int 范围的正数
		{"-21474836480", -2147483648},                             // 超过 int 范围的负数
	}

	for _, tt := range tests {
		t.Run(tt.input, func(t *testing.T) {
			result := myAtoi(tt.input)
			if result != tt.expected {
				t.Errorf("myAtoi(%q) = %d; want %d", tt.input, result, tt.expected)
			}
		})
	}
}
